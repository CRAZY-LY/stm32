步进电机S曲线建立过程：

1.根据S曲线求出相应的速度函数，并将曲线对应的速度值加载到频段表当中（定义的数组），在初始化阶段完成。

2.每过一个时间间隔判断“清洗”标志位是否置“1”，若置“1”，将频段表中的数据从头开始加载到TIM2的重装载计数器当中，实现了装载值按S曲线持续变化，装载时间就是前面说的判断间隔时间；当装载值到达最大值后，保持最大值至“清洗”标志位置“0” 。

3.TIM2不断执行中断，满足条件则产生脉冲，产生脉冲过程中中断时间按频段表持续增大。

4.时间间隔由滴答中断产生。